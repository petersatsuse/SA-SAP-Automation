
== Business

////
Business Layer elements are used to model the operational organization of an enterprise in a technology-independent manner, whereas strategy elements are used to model the strategic direction and choices of the enterprise.

* *_Who_* to engage with, inform and collaborate with
* *_What_* key factors are important
* and *_When_* to consider them

Business Considerations for this solution, which teams/resources should be included and consulted.
Who to engage with, inform, and collaborate with
What key factors are important and
When to consider them

Determine landscape impact, Factors Flavors, Deployment types.

////

This document is targeted at consultants, systems integrators, service providers, and end-customers who are deploying SAP Landscapes in the public cloud.  Within cloud environments there is no strict separation of responsibility (e.g., Networking, DB, OS, Application), as most operations can be performed from a central control plane.  However, this does not mean that specialized knowledge is no longer needed.  Functional teams still exist and will need to work together, this is often best achieved with a DevOps approach utilizing Infrastructure-as-Code.

When implementing SAP in the cloud, knowledge and understanding of the cloud infrastructure, the operating system, tooling, and configuration options (e.g., high availability) are essential.  Equally important is an understanding of how to plan for SAP application usage and its sizing.

////
This means that when implementing SAP in the cloud, knowledge will be required of the cloud infrastructure and the various possibilities that affords along with a good understanding of the operating system and the tooling surrounding it, e.g. High Availability (HA).  Finally an understanding around planning for the application usage and sizing is needed.
////

SAP architectures need to be fine-tuned based on customer requirements around system availability (e.g., 99.99%, 99.95% or 99.9%).  A Single Point of Failure (SPOF) in any of the components and services will need to be identified and protected against.  This is often done with some form of redundancy, such as with an HA cluster configuration.

If you look at a typical SAP implementation you will find:

1. SAP Central Services (ASCS/ERS)
2. a Database (e.g., SAP HANA)
3. a Primary Application Server (PAS)
4. shared storage (NFS)

In the above list, items 1, 2 and 4 are potential SPOFs.

SUSE's SAP Automation will try to eliminate all of these SPOFs by providing HA cluster implementations to ensure automated failover, data protection, and higher system availability.

SAP Central Services (ASCS/ERS):: You need at least 2 nodes to configure an ASCS/ERS HA cluster. Depending on the SAP versions, you can configure the ASCS/ERS cluster in either ENSA 1 or ENSA 2 architecture which could be automated with the SUSE HA Extension (HAE).

Database layer:: You need at least 2 nodes to configure SAP HANA HA/DR cluster in a scale-up deployment. The SUSE HA Extension is used to detect system failures and facilitate automatic failover.

Depending on the services used or what services are available from the cloud provider it could be that you need a third cluster providing a Highly Available NFS service.

This is one of the main benefits of the SUSE SAP Automation project, all the required infrastructure and configuration can be created in order to maximize the SAP System availablity.

=== SUSE SAP Automation Coverage

SAP HANA and Netweaver applications can be deployed in many different scenarios and combinations between them. The automation is constructed from 'building blocks' which are modular and reusable and can be used to deploy a single install through to full cluster deployment.

The following scenarios are supported:

* HANA single node
* HANA HA Scale-up System Replication
** Performance Optimized Scenario
*** active/passive
*** active/readonly
** Cost Optimized Scenario

* Netweaver
* Netweaver HA with Enqueue Replication Version (ENSA1)
* S/4 HANA

SUSE Engineering continues to develop new scenarios based on the demands of customers and partners.

The overall deployment using SUSE SAP Automation looks as follows:

////
- The HA NFS Service with DRBD is used in Azure and GCP environments. AWS environment uses EFS file shares
- The iSCSI server provides SBD disks is used only in the Azure environment. GCP and AWS environments use the cloud fencing agents (`fence_gce` and `fence_aws`)

I would suggest one of the following:
  1. Using separate diagrams for GCP and AWS. @Peter If you can share the original LibreOffice Impress slide, that would be great.
  2. Mentioning that the HA NFS Service with DRBD and the iSCSI server are optional components depend on the Cloud Service Providers.
////

image::SAP_Overview.png[Instance overview,scaledwidth="80%"]

ifeval::[ "{cloud}" == "Azure" ]

endif::[]

ifeval::[ "{cloud}" == "GCP" ]

endif::[]

ifeval::[ "{cloud}" == "AWS" ]

endif::[]

=== Prerequisites for SAP workloads in public clouds

There are a few general prerequisites to ensure a supported SAP Landscape in public cloud environments:

. An SAP license for the SAP software to be deployed is required.

. A understanding of the resource requirements of the SAP workloads (via an SAP System Sizing exercise).

. Certified instance types must be used based on the capacity required by SAP software.

. Ensure suitable network connectivity is provided (bandwidth, latency, and package loss) within the cloud environment for your SAP workloads.

. Only deploy certified operating systems on which the SAP workloads will run.

. A good operational knowledge of the Linux OS, SAP systems operations, and the cloud infrastructure is needed.

. Where highly available solutions are deployed, a deep understanding of the HA concepts and tooling along with how this functions within and alongside the resiliency capability of the cloud infrastructure is required.
